# 近年のモダンフロントエンド開発環境について

`2024/02/05`時点のモダンフロントエンド開発環境について、ハンズオンも交えて解説していきます。(所要時間: 約 1 時間)  
以下にあげる 10. 項目すべてを理解している方は読み飛ばしていただいて大丈夫です。

1. `Node.js` についてわかる [リンク](#nodejs-について)
2. 実行環境としての `Node.js` と開発環境としての `Node.js` の違いがわかる [リンク](#実行環境としての-nodejs-と開発環境としての-nodejs-の違い)
3. `npm` とその基本的な使い方がわかる [リンク](#npm-とその基本的な使い方)
4. `JSX` についてわかる [リンク](#jsx-について)
5. `TypeScript` についてわかる [リンク](#typescript-について)
6. `React` についてわかる [リンク](#react-について)
7. レスト構文とスプレッド構文の違いがわかる (未作成)

以上、10 項目です。  
順番に解説していきますので、分からないところから読んでいただければと思います。  
リンクを押すとその見出しの位置に遷移します。

## `Node.js` について

> 所要時間10分

`Node.js` とは一言でいうとサーバーサイドで `JavaScript` を実行できる環境のことです。  
本来 `JavaScript` はブラウザ上でしか動作しませんが、`Node.js` を入れることでパソコンのOS上で `JavaScript` を実行することができます。

### ハンズオン ✍

1. `Node.js` のインストール  
  この[ダウンロードリンク](https://nodejs.org/en)から `Node.js` の LTS（長期サポート）のインストーラーをダウンロードして実行してください。  
  インストーラーの各選択肢は基本デフォルトのままで大丈夫です。
2. Hello World の実行  
  コマンドプロンプト等の任意のターミナルを開き、以下のコマンドを順番に入力してください。  
  `node -v` → インストール済みの `Node.js` バージョンが表示されます。  
  `node` → `Node.js` の対話型コンソールが起動します。  
  `console.log("Hello World !!")` → Hello World !! と undefined がコンソールに出力されます。

このようにして通常 Edge や Chrome といったブラウザ上でしか実行できない `JavaScript` をパソコンのOS上で動作させることが出来ます。

> 💡 `Node.js` は Google が開発している `V8` という `JavaScript`エンジン をベースに開発されています。

## 実行環境としての `Node.js` と開発環境としての `Node.js` の違い

> 所要時間5分

`Node.js` は主に2つの用途で使用されています。

一つ目は1個上のトピックにあるような `JavaScript` をサーバーサイドで実行するための 「実行環境としての `Node.js`」 です。

二つ目はフロントエンドの開発を円滑に進めるためのツールやパッケージを管理する 「開発環境としての `Node.js`」 です。  
後述する `npm` というコマンドを用いて、テストツール、コード解析ツール、フォーマットツール等の各種ツールをプロジェクトに導入して、適宜使用することができます。

## `npm` とその基本的な使い方

> 所要時間15分

`npm` `(Node Package Manager)` は `Node.js` にデフォルトで付属しているパッケージマネージャです。  
`npm` 自体が自動でパッケージ同士の依存関係を解決してくれるため、使用者は依存関係を意識することなく目的のパッケージをプロジェクトに導入することができます。  
また、独自のスクリプトを定義し、それを実行するためのスクリプトランナーとしての機能も有しています。

### ハンズオン ✍

ここでは `Vite` を使用して `TypeScript` + `React` プロジェクトを新規作成します。  

まず初めに `npm` にproxyを設定する必要があります。  
社員番号とパスワードを入力して以下コマンドを実行して下さい。  
`npm -g config set proxy http://社員番号:パスワード@prtyo1.n-koei.co.jp:8080`

次に以下に沿ってプロジェクトを作成してください。

1. 空のプロジェクトの用意  
  `VSCode` をオススメしますが、お好きなIDEを使用して新しく空のプロジェクトを作成してください。
2. ターミナルの起動  
  `VSCode` の場合は画面上部のメニューバーより `Terminal` → `New Terminal` でターミナルが起動します。
3. `package.json` の初期化  
  ターミナルで `npm init -y` を実行してください。  
  プロジェクト内に `package.json` が作成されます。  
  これがそのプロジェクト内での `npm` の設定ファイルになります。  
  `package.json` の各項目の説明はここでは割愛します。興味がある方は調べてみてください。
4. `Vite` プロジェクトを作成するためのツールをインストール  
  `npm install` または `npm i` を用いることでパッケージをインストールできます。  
  以下のコマンドを実行してください。  
  `npm install --save-dev create-vite`
5. インストールしたツールを用いて `Vite` プロジェクトを作成  
  実行可能なツールの場合は `npx` で実行できます。  
  以下のコマンドを実行してください。対話型のツールが開始します。  
  `npx create-vite`  
  Project name: app (何でも大丈夫です)  
  Select a framework: 上下矢印と Enter で `React` → `TypeScript + SWC` を選択してください。  
  選択が完了するとツールがプロジェクトを自動でセットアップしてくれます。便利です。
6. 開発環境の起動  
  以下のコマンドを順番に実行してください。開発環境が起動します。  
  `cd app`  
  `npm install`  
  `npm run dev`

以上のように `npm` を用いることで依存関係等に悩むことなく必要なツールを簡単にインストール、使用することができます。

> 💡 create-○○というツールの場合、手順4~5の `npm install create-○○` `npx create-○○` をまとめて  
> `npm create ○○` でインストールから実行まで1つのコマンドで行えます。  
> 今回の場合は、`npm create vite` で実行可能です。

## `JSX` について

> 所要時間15分

`JSX` とは `JavaScript XML` の略で `JavaScript` の中で `<h1>title</h1>` のような書き方を可能にする拡張構文です。  
`React` の開発元である `Facebook` によって作成されました。  
`JSX` で書かれたコードは内部的に `React.createElement` に変換されて処理されます。  
そのため、`JSX` を全く使わないことも可能です。が、`JSX` を使った方が読みやすいコードになります。  
以下に例を挙げます。

> 例
> JSX: `<div id="idxxxx">これはdivです</div>`  
> JSXなし: `React.createElement("div", {id: "idxxxx"}, "これはdivです")`

上記の例は全く同じ処理結果になりますが、JSXの方が視認性の点で優れていることがわかると思います。  

また、この `JSX` ですが普通の `.js` ファイルに記述するとエラーになります。  
`JSX` を使用する場合は拡張子を `.jsx` にしましょう。  
後述しますが、`TypeScript` で `JSX` を使用する場合は拡張子が `.tsx` になります。

> 💡 `JSX` のような視認性のためだけに導入された拡張構文を `シンタックスシュガー (糖衣構文)` といいます。  
> 💡 `JSX` は `React` と親密な関係にありますが、`React` が無いと動かないとかはなく `Vue` 等、他のフレームワークでも同じように書くことができます。（JSXを変換する処理が必要です）

### ハンズオン ✍

`npm` のハンズオンで作った `Vite` の環境をそのまま使用します。  
まだ作っていないという方は[こちら](#npm-とその基本的な使い方)を参考に環境を作成してください。

1. `src/App.tsx` の return文の中の好きな場所に以下を追記してください。  
  `<div style={{backgroundColor: 'royalblue', padding: '1rem', borderRadius: '0.5rem'}}>これはdivです</div>`
2. 開発環境を起動してください。  
  起動方法は `npm` のハンズオンの手順6参照
3. 画面の表示が変わっていることを確認

`div` 以外にもhtmlのタグは全体的にサポートされているので試しに色々書いてみてください。

## `TypeScript` について

> 所要時間30分

`TypeScript` は `JavaScript` に静的型付けを行えるように設計されたスーパーセットのプログラミング言語です。  
`JavaScript` のすべての機能をサポートしており、`JavaScript` で書かれたコードは `TypeScript` でも同様に実行可能です。  
また、`TypeScript` では追加の機能（型）を提供します。  
このように元の言語の機能をすべて有し、さらに独自の追加の機能が付与された言語をスーパーセットといいます。  

### トランスパイル

`TypeScript` はブラウザ上でそのまま実行することができません。  
`TypeScript` で書かれたコードをブラウザ上で実行するには、ブラウザ上で実行可能な `JavaScript` にコンパイルする必要があります。  
通常、ある言語からアセンブリ等のそれより下のレベルの言語に変換することをコンパイルといいますが、  
`TypeScript` から `JavaScript` への変換は同レベルの言語間でのコンパイルを行うことになります。  
このように同じレベルの言語同士でコンパイルを行うことをトランスパイルといいます。

### 機能

`TypeScript` には細かい機能は色々ありますが、主要な機能は以下の3つのみです。  

1. 変数に型注釈を行う  
  変数宣言時に `変数名: 型` の書き方で型注釈を行うことができます。  
  例> `const hoge: number = 1`
2. 型推論  
  変数宣言時に型注釈を行わない場合は、自動的に型が推論されます。  
  例> `const isHoge = false` → `boolean` 型と推論される  
3. 独自の型を定義  
  `interface` や `type` 構文を用いることで独自の型を定義することができます。  
  また、定義した型を用いて独自の型を持つ変数を宣言することができます。  
  例> `type Person { name: string; age: number; }`  
  `const person1: Person = { name: 'test tarou', age: 25 }`

### 色々な型

`TypeScript` には他の静的型付け言語には無いような特殊な型も存在します。  
ここでは `TypeScript` で使用可能な色々な型について紹介します。

| 名称 | 説明 | 使い方 |
| - | - | - |
| プリミティブ型 | string, number, boolean 等の基本的な型です | `let hoge: number`<br>🟩 `hoge = 123`<br>🟥 `hoge = 'fuga'` |
| undefined | プリミティブ型のうちの1つです。<br>後述するユニオン型の書き方と併用することでnull許可を実現できます。 | `let hoge: number \| undefined`<br>🟩 `hoge = 123`<br>🟩 `hoge = undefined` |
| unknown | どんな値でも入れることのできる型です。<br>ただし、unknown型の変数は型チェックを行わないと使用できません。 | `let hoge: unknown`<br>🟩 `hoge = 'fuga'`<br>🟩 `hoge = 123`<br>🟥 `hoge * 2` |
| any | どんな値でも入れることのできる型です。<br>unknown型と異なり型チェックが行われません。<br>この動きにより潜在的なバグを生む可能性があるので、<br>基本はany型ではなくunknown型を使うようにしましょう。 | `let hoge: any`<br>🟩 `hoge = 'fuga'`<br>🟩 `hoge = 123`<br>🟩 `hoge * 2` |
| オブジェクト型 | `interface` や `type` 構文で定義できる型です。<br>内部に複数のプリミティブ型もしくはオブジェクト型を持ちます。 | `type Person { name: string; age: number; }`<br>`let hoge: Person`<br>🟩 `hoge = { name: 'fuga', age: 25 }`<br>🟥 `hoge = { name: 'fuga' }`<br>🟥 `hoge = { name: 'fuga', age: 25, id: 1 }` |
| 複合型 | 配列やタプル等の複数の要素を持つ型です。<br>オブジェクト型も複合型の中の一種です。 | 🟩 `const hogeArray: number[] = [11, 22, 33]` |
| ユニオン型 | 「いずれかの型」を表す型です。<br>複数の型をパイプ記号 ( \| ) で繋げて書きます。<br>また、unknown型と同様に型チェックを行わないと変数を使用できません。 | `let hoge: number \| boolean`<br>🟩 `hoge = 123`<br>🟩 `hoge = true`<br>🟥 `hoge = 'fuga'`<br>🟥 `hoge * 2` |
| リテラル型 | 特定の文字列や数値を表す型です。<br>ユニオン型と併用することでセレクトボックスのように<br>選択肢の中のいずれかを表現することができます。 | `let hoge: 'banana' \| 'apple'`<br>🟩 `hoge = 'banana'`<br>🟩 `hoge = 'apple'`<br>🟥 `hoge = 'orange'`|
| 関数の型 | 関数の型を定義することができます。<br>型定義には `type` 構文を使用します。以下構文です。<br>`type 型の名前 = (引数名: 引数の型) => 戻り値の型` | `type hogeType = (p1: number, p2: string) => void`<br>`let hogeFn: hogeType`<br>🟩 `hogeFn = () => {}`<br>🟩 `hogeFn = (p1, p2) => {}`<br>🟥 `hogeFn = (p1, p2, p3) => {}` |

ここではよく使う型を中心に紹介させていただきました。  
他にもenum型、never型、交差型、ジェネリクス等々...色々な型があるので興味があったら調べてみてください。

### ハンズオン ✍

`npm` のハンズオンで作った `Vite` の環境をそのまま使用します。  
まだ作っていないという方は[こちら](#npm-とその基本的な使い方)を参考に環境を作成してください。

#### `src/App.tsx` の編集

7行目の `const [count, setCount] = useState(0)` の下で変数定義等ができます。  
一つ上の `色々な型` のトピックの使い方に倣って型付きの変数を宣言してみてください。

> 💡 `typeof` 演算子を使うことで型付きの変数に付与されている型情報を取得することができます。  
> → `const hoge: number = 123` に `typeof hoge` とすると `number` 型が取得できます。  
> これを応用して `enum` 等からその `enum` に含まれるキーののユニオン型を作成することができます。以下に例を挙げます。

```ts
enum hogeEnum {
  Banana = 1,
  Apple = 2,
}
// type hogeType = 'Banana' | 'Apple' と同じ
type hogeType = keyof typeof hogeEnum
let hoge: hogeType
🟩 hoge = 'Banana'
🟩 hoge = 'Apple'
🟥 hoge = 'Orange'
```

## `React` について

> 所要時間10分

`React` は UI を構築するためのコンポーネントベースの宣言的JavaScriptライブラリです。  
一つ一つ順を追って解説していきます。

### コンポーネントベース

コンポーネントベースとは、あるページを構成する要素を、それぞれを独立した再利用可能な部品（コンポーネント）に分割し、それぞれが独自の構造、データ、振る舞いを持つという設計思想です。  
以下に簡単な例を挙げます。  

作成するページ: ユーザー登録ページ

必要なコンポーネント
| 名称 | 役割 |
| - | - |
| Input | ユーザー名やメールアドレス等を入力する欄です。 |
| PasswordInput | パスワードを入力するための欄です。文字を伏せる処理が必要になるかもしれません。 |
| UserInfoInputForm | ユーザー情報を入力するためのコンポーネントです。<br>複数のInputコンポーネントを持ち、入力項目全体を管理します。 |
| Button | 登録やキャンセル等のボタンのコンポーネントです。押下時に適した処理を実行する必要があります。 |
| Checkbox | 利用規約への同意やメールマガジン購読など、チェックボックス形式の入力を行うためのコンポーネントです。 |
| Title | 渡された文字を表示するコンポーネントです。見出しのため、少し目立つスタイリングが必要かもしれません。 |

それぞれのコンポーネントが単一の役割と責任（例えばButtonなら押下された時に適切なを処理を実行する責任を持つ）を持つように実装を行うことで、プロジェクト全体の視認性と保守性を向上させることができます。

またそれぞれのコンポーネントは再利用可能であるため、例えば次にログインページを作成する場合、ユーザー登録ページで作成したUserInfoInputFormやButtonをそのまま再利用することができるかもしれません。

プロジェクトが大規模になればなるほどこの恩恵は大きくなっていきます。  
これがコンポーネントベースの考え方になります。

### 宣言的なUI

宣言的なUIとは、すごく簡単に言うと、コードから実際の画面表示のイメージがしやすいように実装を行う概念のことです。  
言葉だけだといまいちイメージがつきづらいと思いますので以下の2つの例を見て、実際に表示される画面出力をイメージしてみてください。

```jsx
// 例1: JavaScript のみ
<div>
  <input type='text' id='inputField'>
  <p id='outputText'></p>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const inputField = document.getElementById('inputField');
    const outputText = document.getElementById('outputText');

    inputField.addEventListener('input', function(event) {
      const value = event.target.value;
      outputText.textContent = '入力された文字列の長さは、「' + value.length + '」です。';
    });
  });
</script>
```

```jsx
// 例2: React
const [value, setValue] = useState('');
return (
  <div>
    <input type='text' value={value} onChange={(e) => {setValue(e.target.value)}} />
    <p>入力された文字列の長さは、「{value.length}」です。</p>
  </div>
)
```

どちらが実際の画面出力をイメージしやすかったでしょうか。  
おそらく例2だと思います。（実際の画面表示はどちらも同じになります。）

これが `React` の特徴の一つである宣言的UIの概念です。

### ハンズオン ✍

`npm` のハンズオンで作った `Vite` の環境をそのまま使用します。  
まだ作っていないという方は[こちら](#npm-とその基本的な使い方)を参考に環境を作成してください。

一つ上のトピックで作成した input 要素とそこに入力された文字列の長さを表示するコンポーネントを実装してみたいと思います。

#### コンポーネントの作成

`src/` の配下に新しく `InputWithLength.tsx` というファイルを作成して以下のように入力して下さい。

``` jsx
import { useState } from "react"

export default function InputWithLength(){
  const [value, setValue] = useState('初期値');
  return (
    <div>
      <input type='text' value={value} onChange={(e) => {setValue(e.target.value)}} />
      <p>入力された文字列の長さは {value.length} です</p>
    </div>
  )
}
```

#### コンポーネントの配置

1. `src/App.tsx` を開いて、まず先ほど作成した `InputWithLength` をインポートします。  
`import InputWithLength from './InputWithLength'`

2. 後はreturn文の中の好きな場所に `<InputWithLength />` を配置してみてください。  
  何個置いても大丈夫です。

3. 開発環境を起動して画面を確認してみてください。  
  inputとその下にラベルが表示されていると思います。  
  input に入力して動作を確認してみてください。
